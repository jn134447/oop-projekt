{
  "story": {
    "start": {
      "texts": [
        { "speaker": "narrative", "content": "A key on the ground." },
        { "speaker": "player", "content": "Pick it up?" }
      ],
      "choices": [
        {
          "text": "Pick up",
          "target": "got_key",
          "conditions": [
            {
              "type": "has_item",
              "item": "rusty_key",
              "quantity": 0,
              "op": "=="
            }
          ]
        },
        {
          "text": "Leave it",
          "target": "no_key"
        },
        { "text": "Touch marking on the floor", "target": "door", "conditions": [{ "type": "flag_set", "flag": "entered_inside", "value": true }] }
      ]
    },

    "got_key": {
      "texts": [
        {
          "content": "You got the key.",
          "actions": [
            {
              "type": "give_item",
              "item": "rusty_key"
            }
          ]
        }
      ],
      "default_next": "door"
    },

    "no_key": {
      "texts": [
        {
          "content": "You left the key."
        }
      ],
      "default_next": "door"
    },

    "door": {
      "texts": [
        {
          "content": "A locked door."
        }
      ],
      "choices": [
        {
          "text": "Open door",
          "target": "inside",
          "conditions": [
            {
              "type": "has_item",
              "item": "rusty_key",
              "quantity": 1
            }
          ]
        },
        {
          "text": "Go back",
          "target": "start"
        }
      ]
    },

    "inside": {
      "texts": [
        {
          "content": "You're inside.",
          "actions": [{ "type": "set_flag", "flag": "entered_inside", "value": true }]
        },
        { "content": "you found some shillings on the ground" },
        { "content": "Collected 23 shillings", "actions": [{ "type": "give_item", "item": "shilling", "quantity": 23 }] },
        { "content": "they feel cold on touch" }
      ],
      "choices": [{ "text": "Go back", "target": "door" }]
    }
  }
}
